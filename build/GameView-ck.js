define(["jquery","underscore","backbone","controllers/game/GameViewController"],function(e,t,n,r){var i=n.View.extend({controller:{},el:e("#page"),initialize:function(e){this.collection=e.collection;this.model=e.model;this.loadTemplate(this.model.get("template"))},render:function(){var e=this;e.controller=new r(e.model);e.setupListeners()},setupListeners:function(){var t=this;e("#play").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.play()});e("#stop").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.stop()});e("#step-forward").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.stepForward()});e("#step-backward").bind("click",function(t){t.preventDefault();t.stopPropagation();var n={left:"200px",opacity:1};e("#challenge").animate(n,"slow")});e("#toggle-debug").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.toggleDebug()});e("#toggle-skins").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.toggleSkins()});e("#close-challenge").bind("click",function(t){t.preventDefault();t.stopPropagation();var n={left:"700px",opacity:0};e("#challenge").animate(n,"fast")});e("#pan-left").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.pan("left")});e("#pan-right").bind("click",function(e){e.preventDefault();e.stopPropagation();t.controller.pan("right")});e("#pan-left").hide();e("#pan-right").hide()},loadTemplate:function(n){console.log("GameView / loadTemplate / templateStr: "+n);var r=this;switch(n){case"mobile":require(["text!templates/game/mobileTemplate.html"],function(n){var i={},s=t.template(n,i);e("#page").html(s);r.render()});break;default:require(["text!templates/game/desktopTemplate.html"],function(n){var i={},s=t.template(n,i);e("#page").html(s);r.render()})}}});return i});